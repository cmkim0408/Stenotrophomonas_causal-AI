# ATPM=0 성장 불가 문제 원인 및 해결 방안

## 문제 요약

**현상**: ATPM=0일 때 신규 모델의 모든 플럭스가 0 (성장 불가)

**레퍼런스 모델과의 차이**:
- 레퍼런스: ATPM=0일 때 성장률은 0이지만 경로는 작동 (ICL=0.367, MALS=0.367)
- 신규: ATPM=0일 때 모든 플럭스 0 (경로 자체가 작동 안 함)

---

## 원인 분석

### 확인된 사항
1. ✅ ICL, MALS 반응은 모델에 존재함
2. ✅ 미디어 설정은 문제 없음 (레퍼런스 미디어 사용해도 동일)
3. ✅ ATPM 제약 자체는 문제 없음
4. ❌ 경로가 전혀 작동하지 않음

### 가능한 원인
1. **누락된 필수 반응**: 앞서 확인한 114개 누락 반응 중 일부가 ATPM=0에서 필수
2. **코팩터 초기화 문제**: CoA, NADH 등 코팩터 초기화 불가
3. **모델 구조 차이**: Biomass 반응이나 제약 조건 차이
4. **레퍼런스 모델의 특수 설정**: fba_flux_gradient_acid.csv가 특수 설정으로 생성됨

---

## 해결 방안

### 방안 1: 누락된 HIGH 우선순위 반응 추가 (우선)

**추가할 반응**:
1. **ACS_ADP** (Acetate-CoA ligase, ADP-forming)
   - 레퍼런스 모델에서 실제 사용됨 (플럭스: 0.943448)
   - ATPM=0에서도 경로 작동에 필수일 수 있음

2. **PEPCK_ATP** (PEP carboxykinase, ATP)
   - 레퍼런스 모델에서 실제 사용됨 (플럭스: 0.078621)

3. **SUCDi** (Succinate dehydrogenase)
   - 레퍼런스 모델에서 실제 사용됨 (플럭스: 1.0)

**실행 방법**:
- `test_fba_with_missing_reactions.py` 스크립트 사용
- 3개 HIGH 우선순위 반응 추가 후 ATPM=0에서 테스트

### 방안 2: ATPM을 작은 값으로 설정 (임시 해결)

ATPM=0 대신 ATPM=0.1 또는 0.5로 설정하여 테스트

**장점**: 빠른 해결
**단점**: 근본 원인 해결 안 됨

### 방안 3: 레퍼런스 모델 FBA 설정 상세 분석

fba_flux_gradient_acid.csv가 어떤 설정으로 생성되었는지 확인

**확인 사항**:
- 미디어 설정 (이미 확인했지만 추가 확인)
- Bootstrap seeds (코팩터 초기화)
- 추가 제약 조건
- 특수 설정

### 방안 4: 단계적 Gap-filling

1. ATPM=0에서 성장 가능하도록 최소한의 반응 추가
2. Gap-filling 도구 사용 (예: CarveMe, ModelSEED)
3. 레퍼런스 모델의 반응을 우선순위대로 추가

---

## 권장 실행 순서

### 1단계: HIGH 우선순위 반응 추가 (즉시)
```
1. ACS_ADP, PEPCK_ATP, SUCDi 반응 추가
2. ATPM=0에서 FBA 테스트
3. 경로 작동 여부 확인
```

### 2단계: 결과 분석
```
- 경로가 작동하면 → 추가 반응이 원인이었음
- 경로가 여전히 작동 안 하면 → 다른 원인 조사
```

### 3단계: 추가 진단 (2단계 실패 시)
```
1. 코팩터 초기화 테스트
2. 레퍼런스 모델 상세 분석
3. Gap-filling 수행
```

---

## 결론

**원인**: 누락된 필수 반응 가능성이 높음 (특히 ACS_ADP)

**해결**: 
1. HIGH 우선순위 3개 반응 추가 (ACS_ADP, PEPCK_ATP, SUCDi)
2. ATPM=0에서 재테스트
3. 필요시 추가 반응 추가

**예상 결과**: 
- ACS_ADP 추가 시 Acetate 전환 경로 작동 시작
- ATPM=0에서도 경로 활성화 (레퍼런스 모델처럼 ICL, MALS 플럭스 발생)
